<?xml version="1.0" encoding="UTF-8"?>
<SpaceSystem name="GSRadio"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.omg.org/spec/XTCE/20180204"
    xsi:schemaLocation="http://www.omg.org/spec/XTCE/20180204 https://www.omg.org/spec/XTCE/20180204/SpaceSystem.xsd">
    <TelemetryMetaData>
        <ParameterTypeSet>
            <IntegerParameterType name="int32">
                <IntegerDataEncoding encoding="twosComplement" sizeInBits="32"
                    byteOrder="leastSignificantByteFirst" />
            </IntegerParameterType>
            <FloatParameterType name="float">
                <UnitSet />
                <FloatDataEncoding sizeInBits="32" byteOrder="leastSignificantByteFirst" />
            </FloatParameterType>
        </ParameterTypeSet>
        <ParameterSet>
            <!--For
            Ground Station Radio-->
            <Parameter name="frequency" parameterTypeRef="float" shortDescription="Frequency" />
            <Parameter name="spreading_factor" parameterTypeRef="int32"
                shortDescription="Spreading Factor" />
            <Parameter name="bandwidth" parameterTypeRef="float" shortDescription="Bandwidth" />
            <Parameter name="coding_rate" parameterTypeRef="int32" shortDescription="Coding Rate" />
            <Parameter name="power" parameterTypeRef="int32" shortDescription="Power" />
        </ParameterSet>
        <ContainerSet>
            <SequenceContainer name="GSRPacket">
                <EntryList>
                    <!--Order
                    of Parameters-->
                    <ParameterRefEntry parameterRef="frequency" />
                    <ParameterRefEntry parameterRef="bandwidth" />
                    <ParameterRefEntry parameterRef="coding_rate" />
                    <ParameterRefEntry parameterRef="spreading_factor" />
                    <ParameterRefEntry parameterRef="power" />
                </EntryList>
            </SequenceContainer>
        </ContainerSet>
    </TelemetryMetaData>
    <CommandMetaData>
        <ArgumentTypeSet>
            <IntegerArgumentType name="spreading_factor_arg">
                <IntegerDataEncoding sizeInBits="32" />
                <ValidRangeSet>
                    <ValidRange minInclusive="5" maxInclusive="12" />
                </ValidRangeSet>
            </IntegerArgumentType>

            <IntegerArgumentType name="power_arg">
                <UnitSet>
                    <Unit>dBm</Unit>
                </UnitSet>
                <IntegerDataEncoding sizeInBits="32" />
                <ValidRangeSet>
                    <ValidRange minInclusive="-9" maxInclusive="22" />
                </ValidRangeSet>
            </IntegerArgumentType>

            <EnumeratedArgumentType name="coding_rate_arg">
                <IntegerDataEncoding sizeInBits="32" />
                <EnumerationList>
                    <Enumeration value="5" label="5" />
                    <Enumeration value="6" label="6" />
                    <Enumeration value="7" label="7" />
                    <Enumeration value="8" label="8" />
                </EnumerationList>
            </EnumeratedArgumentType>

            <FloatArgumentType name="bandwidth_arg">
                <UnitSet>
                    <Unit>MHz</Unit>
                </UnitSet>
                <FloatDataEncoding sizeInBits="32" />
                <ValidRangeSet>
                    <ValidRange minInclusive="7.8" maxInclusive="500" />
                </ValidRangeSet>
            </FloatArgumentType>

            <FloatArgumentType name="frequency_arg">
                <UnitSet>
                    <Unit>MHz</Unit>
                </UnitSet>
                <FloatDataEncoding sizeInBits="32" />
                <ValidRangeSet>
                    <ValidRange minInclusive="150" maxInclusive="900" />
                </ValidRangeSet>
            </FloatArgumentType>

        </ArgumentTypeSet>
        <MetaCommandSet>
            <MetaCommand name="radio_ping" shortDescription="radio init ack_r" />

            <MetaCommand name="set_coding_rate" shortDescription="radio cr ack_r">
                <ArgumentList>
                    <Argument shortDescription="Coding Rate" name="coding_rate"
                        argumentTypeRef="coding_rate_arg" />
                </ArgumentList>
            </MetaCommand>

            <MetaCommand name="set_bandwidth" shortDescription="radio bw ack_r">
                <ArgumentList>
                    <Argument shortDescription="Bandwidth" name="bandwidth"
                        argumentTypeRef="bandwidth_arg" />
                </ArgumentList>
            </MetaCommand>

            <MetaCommand name="set_spreading_factor" shortDescription="radio sf ack_r">
                <ArgumentList>
                    <Argument shortDescription="Spreading Factor" name="spreading_factor"
                        argumentTypeRef="spreading_factor_arg" />
                </ArgumentList>
            </MetaCommand>

            <MetaCommand name="set_frequency" shortDescription="radio freq ack_r">
                <ArgumentList>
                    <Argument shortDescription="Frequency" name="frequency"
                        argumentTypeRef="frequency_arg" />
                </ArgumentList>
            </MetaCommand>

            <MetaCommand name="set_power" shortDescription="radio pow ack_r">
                <ArgumentList>
                    <Argument shortDescription="Power" name="power" argumentTypeRef="power_arg" />
                </ArgumentList>
            </MetaCommand>
        </MetaCommandSet>
    </CommandMetaData>
</SpaceSystem>
